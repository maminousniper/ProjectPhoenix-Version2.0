import{j as e,T as f,u as p,s as A,y as I,r,m as b,B as P,z as R,C as j,f as m,_,L as v,b as G,x as T,J as F}from"./index-4ee73d63.js";import{M as $}from"./ModalMenu-ee170368.js";import{G as w}from"./Grid-50e06e40.js";import{M as V}from"./Menu-66d6d39d.js";import{C as y}from"./Card-cdcbad59.js";import{G as S}from"./Group-12a8f617.js";import{B as C}from"./Badge-c85d518e.js";import{T as N}from"./Tooltip-555ed2b2.js";import{S as q}from"./Select-325d7244.js";import{A as H}from"./AppShell-416991d8.js";import{N as W}from"./Navbar-49d473ed.js";const J=({currentTab:l,setCurrentTab:s,permissions:i})=>e.jsxs("div",{className:"re-navbar",children:[e.jsx("span",{className:"re-navOption",style:{borderStyle:l=="home"?"none none none solid":"none",borderColor:l=="home"?"#339AF0":"none"},onClick:()=>{s("home")},children:e.jsxs("span",{className:"navOption-content",children:[e.jsx("i",{className:"fa-solid fa-house",style:{fontSize:"16px"}}),e.jsx(f,{order:6,children:"Home"})]})}),i.motelsTab&&e.jsx("span",{className:"re-navOption",style:{borderStyle:l=="motels"?"none none none solid":"none",borderColor:l=="motels"?"#339AF0":"none"},onClick:()=>{s("motels")},children:e.jsxs("span",{className:"navOption-content",children:[e.jsx("i",{className:"fa-solid fa-bed",style:{fontSize:"16px"}}),e.jsx(f,{order:6,children:"Motels"})]})}),i.storageTab&&e.jsx("span",{className:"re-navOption",style:{borderStyle:l=="storages"?"none none none solid":"none",borderColor:l=="storages"?"#339AF0":"none"},onClick:()=>{s("storages")},children:e.jsxs("span",{className:"navOption-content",children:[e.jsx("i",{className:"fa-solid fa-warehouse",style:{fontSize:"16px"}}),e.jsx(f,{order:6,children:"Storages"})]})})]}),K=({currentTab:l})=>{const{lang:s}=p(A),i={home:s.realestate.available_properties,motels:s.realestate.motels_tab,storages:s.realestate.storages_tab};return e.jsx(f,{order:3,style:{marginLeft:"5px",padding:"5px",fontStyle:"italic"},children:i[l]})};const Q=({currentAds:l,permissions:s,categories:i})=>{const{lang:o}=p(A),{serial:h}=p(I),[c,d]=r.useState(!1),[n,a]=r.useState({}),[g,x]=r.useState(9999),k=t=>{if(g===t){x(9999);return}x(t)},z=t=>{a({title:t.title,options:[{height:200,title:o.realestate.image,type:"image",image:t.img,style:{marginTop:"10px",borderRadius:"4px"}},{type:"textarea",label:o.realestate.description,description:t.description,style:{marginTop:"10px"}}],extraData:{event:"no"}}),d(!0)},O=()=>{a({title:o.realestate.ad_title,button:o.realestate.confirm_button,options:[{name:"title",type:"text",title:o.realestate.title,icon:"fa-solid fa-pen-to-square",asterisk:!0},{name:"image",type:"text",title:o.realestate.photo,icon:"fa-solid fa-image",style:{marginTop:"5px"},asterisk:!0},{name:"price",type:"number",title:o.realestate.price,icon:"fa-solid fa-hand-holding-dollar",style:{marginTop:"5px"}},{name:"type",type:"select",title:o.realestate.type,default:"house",options:i,style:{marginTop:"5px"}},{name:"description",type:"textarea",label:o.realestate.description,style:{marginTop:"10px"},asterisk:!0}],extraData:{event:"newPost"}}),d(!0)},L=t=>{var u;d(!1),t!=null&&t.extraData&&m("av_realestate",(u=t==null?void 0:t.extraData)==null?void 0:u.event,t)},M=t=>{m("av_realestate","gps",t)},E=t=>{m("av_realestate","copy",t)},B=t=>{m("av_realestate","deleteAd",t)};return e.jsxs("div",{className:"ads-container",children:[c&&e.jsx($,{callback:L,data:n}),(s==null?void 0:s.createAds)&&e.jsx("div",{style:{position:"absolute",zIndex:"200",bottom:b(45),right:b(20)},children:e.jsx(P,{leftIcon:e.jsx("i",{className:"fa-regular fa-square-plus"}),onClick:O,children:"New Ad"})}),e.jsx(w,{columns:2,children:l.map((t,u)=>e.jsx(V,{shadow:"md",width:120,position:"bottom-end",onClose:()=>{k(999)},children:e.jsx(w.Col,{className:"ads-card",children:e.jsxs(y,{shadow:"sm",padding:"xs",radius:"md",withBorder:!0,children:[e.jsx(y.Section,{children:e.jsx(R,{src:t.img,height:160,alt:t.identifier})}),e.jsxs(y.Section,{style:{padding:"10px"},children:[e.jsx(j,{weight:500,style:{maxWidth:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},color:"gray.3",children:t.title}),e.jsxs(S,{position:"left",mt:"1px",mb:"0",spacing:"10px",children:[e.jsxs("span",{style:{display:"inline-flex",width:"50%",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-location-dot",style:{fontSize:"10px",color:"white"}}),e.jsx(j,{id:"ad-text",weight:500,size:11,color:"gray.5",style:{marginLeft:"4px"},truncate:!0,onClick:()=>{M(t.coords)},children:t.location})]}),e.jsx("span",{style:{width:"44%"},children:e.jsxs(j,{weight:500,size:11,color:"gray.5",truncate:!0,id:"ad-text",onClick:()=>{E(t.phone)},children:[e.jsx("a",{style:{fontWeight:"700",width:"10px"},children:o.realestate.phone}),` ${t.phone}`]})})]}),e.jsxs(S,{position:"left",mt:"10px",mb:"0",spacing:"3px",children:[e.jsx(C,{color:"grape.1",defaultChecked:!0,size:"sm",children:t.type}),t.price&&e.jsx(C,{color:"teal.1",defaultChecked:!0,size:"sm",children:`$${t.price}`}),e.jsxs("span",{style:{display:"inline-flex",marginLeft:"auto"},children:[e.jsx(N,{label:o.realestate.more_info,color:"dark.7",withArrow:!0,children:e.jsx("i",{id:"ad-button",className:"fa-solid fa-circle-info",style:{fontSize:"14px",opacity:"0.85"},onClick:()=>{z(t)}})}),h==t.author||s.deleteAds?e.jsx(N,{label:o.realestate.delete,color:"dark.7",withArrow:!0,children:e.jsx("i",{id:"ad-button",className:"fa-solid fa-circle-xmark",style:{fontSize:"14px",opacity:"0.85",marginLeft:"8px"},onClick:()=>{B(t)}})}):null]})]})]})]})})},u))})]})},U=r.lazy(()=>_(()=>import("./Storages-14401198.js"),["./Storages-14401198.js","./index-4ee73d63.js","./index-ec2a5f13.css","./AccordionComponent-830d16de.js","./ModalMenu-ee170368.js","./Modal-582647f8.js","./Paper-9211399c.js","./use-window-event-21a1733e.js","./NumberInput-8122340f.js","./TextInput-e9b9102b.js","./use-input-props-9516363f.js","./clamp-23377890.js","./Select-325d7244.js","./ScrollArea-b826cb7d.js","./Tooltip-555ed2b2.js","./Table-44f5c637.js","./Indicator-63f4ca3e.js","./Badge-c85d518e.js","./Accordion-219f390d.js","./get-safe-id-7e16e55a.js","./create-scoped-keydown-handler-f8889cf4.js","./Menu-66d6d39d.js","./IconTrash-394ce158.js","./Storages-3cedd98e.css"],import.meta.url)),X=r.lazy(()=>_(()=>import("./Motels-9131194b.js"),["./Motels-9131194b.js","./index-4ee73d63.js","./index-ec2a5f13.css","./AccordionComponent-830d16de.js","./ModalMenu-ee170368.js","./Modal-582647f8.js","./Paper-9211399c.js","./use-window-event-21a1733e.js","./NumberInput-8122340f.js","./TextInput-e9b9102b.js","./use-input-props-9516363f.js","./clamp-23377890.js","./Select-325d7244.js","./ScrollArea-b826cb7d.js","./Tooltip-555ed2b2.js","./Table-44f5c637.js","./Indicator-63f4ca3e.js","./Badge-c85d518e.js","./Accordion-219f390d.js","./get-safe-id-7e16e55a.js","./create-scoped-keydown-handler-f8889cf4.js","./Menu-66d6d39d.js","./IconTrash-394ce158.js"],import.meta.url)),Y=({currentTab:l,appData:s})=>{const[i,o]=r.useState(s==null?void 0:s.categories),[h,c]=r.useState(s==null?void 0:s.ads),d=n=>{const a=n.toLowerCase(),g=s==null?void 0:s.ads.filter(x=>a=="all"?s==null?void 0:s.ads:x.type.toLowerCase().includes(a));c(g)};return r.useEffect(()=>{const n=[...s==null?void 0:s.categories,{value:"all",label:"All"}];o(n),c(s==null?void 0:s.ads)},[s]),e.jsxs("div",{className:"re-main-container",children:[e.jsxs("div",{className:"re-header",children:[e.jsx(K,{currentTab:l}),l==="home"&&e.jsx(q,{defaultValue:"all",placeholder:"All",data:i,onChange:d,style:{marginRight:"5px"}})]}),e.jsxs("div",{className:"re-body",children:[l=="home"&&e.jsx(Q,{currentAds:h,permissions:s==null?void 0:s.permissions,categories:s==null?void 0:s.categories}),l=="storages"&&e.jsx(e.Fragment,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{style:{position:"absolute",width:"100%",height:"100%"},children:e.jsx(v,{visible:!0,overlayBlur:2,overlayColor:"rgba(20, 21, 23, 1)"})}),children:e.jsx(U,{})})}),l=="motels"&&e.jsx(e.Fragment,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{style:{position:"absolute",width:"100%",height:"100%"},children:e.jsx(v,{visible:!0,overlayBlur:2,overlayColor:"rgba(20, 21, 23, 1)"})}),children:e.jsx(X,{})})})]})]})};const ce=()=>{const l=G(),[s,i]=r.useState("home"),[o,h]=r.useState({ads:[],categories:[],permissions:[]}),[c,d]=r.useState(!0);return T("updateAds",n=>{const a={...o,ads:n};h(a)}),r.useEffect(()=>{(async()=>{const a=await m("av_realestate","getData");h(a),l(F(a.permissions)),d(!0)})()},[]),e.jsx("div",{children:c?e.jsx(H,{padding:"0px",navbar:e.jsx(W,{width:{base:100},height:"100%",p:"0",sx:{overflow:"auto"},children:e.jsx(J,{currentTab:s,setCurrentTab:i,permissions:o==null?void 0:o.permissions})}),styles:n=>({main:{backgroundColor:n.colorScheme==="dark"?n.colors.dark[8]:n.colors.gray[0],borderStyle:"none none none none"}}),children:e.jsx(Y,{currentTab:s,appData:o})}):e.jsx(v,{visible:!c,overlayBlur:2})})};export{ce as default};
