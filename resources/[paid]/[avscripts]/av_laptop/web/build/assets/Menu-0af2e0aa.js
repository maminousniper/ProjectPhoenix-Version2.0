import{j as e,z as $,T as _,e as B,C as E,A as G,u as v,s as q,Z as O,r as i,m as k,B as R,f as g}from"./index-4ee73d63.js";import{M as l}from"./Menu-66d6d39d.js";import{G as P}from"./Group-12a8f617.js";import{F as I}from"./Flex-d646fed8.js";import{I as T}from"./IconSettings-f3c34654.js";import{I as V}from"./IconTrash-394ce158.js";import{M as Z}from"./ModalMenu-ee170368.js";import{S as H}from"./Select-325d7244.js";const J=({item:s,handleDelete:o,lang:n,handleEdit:x})=>{var u;return e.jsx(l,{shadow:"md",width:"auto",children:e.jsxs(P,{className:"menu-item-card",grow:!0,children:[e.jsx($,{src:s==null?void 0:s.image,height:60,width:60,alt:s.name,withPlaceholder:!0}),e.jsxs(I,{gap:"0px",justify:"center",align:"left",direction:"column",wrap:"wrap",maw:200,ml:5,children:[e.jsx(_,{order:4,truncate:!0,maw:190,children:s.label}),e.jsx(B,{style:{display:"flex"},children:(u=s==null?void 0:s.ingredients)==null?void 0:u.map((p,m)=>e.jsx(E,{size:12,truncate:!0,children:e.jsx(e.Fragment,{children:s.ingredients[m+1]?e.jsx(e.Fragment,{children:`${p} |Â `}):e.jsx(e.Fragment,{children:`${p}`})})},m))})]}),e.jsxs(I,{justify:"center",align:"right",direction:"column",sx:{marginLeft:"10px",marginRight:"10px"},children:[e.jsx(l.Target,{children:e.jsx(G,{variant:"subtle",color:"cyan.4",size:"sm",children:e.jsx(T,{size:"1rem"})})}),e.jsxs(l.Dropdown,{children:[e.jsx(l.Label,{children:n.item_options}),e.jsx(l.Item,{icon:e.jsx(T,{size:14}),onClick:()=>{x(s)},children:n.edit_item}),e.jsx(l.Label,{children:n.danger}),e.jsx(l.Item,{color:"red",icon:e.jsx(V,{size:14}),onClick:()=>{o(s.name)},children:n.delete_item})]})]})]})})},K=(s,o)=>s.filter(n=>n.jobs===!1||Array.isArray(n.jobs)&&n.jobs.includes(o));const ne=()=>{const{lang:s}=v(q),{ingredients:o,itemTypes:n,animations:x,job:u}=v(O),[p,m]=i.useState([{value:"all",label:s.business.all_type}]),[c,h]=i.useState([]),[j,d]=i.useState(c),[A,y]=i.useState({}),[M,f]=i.useState(!1),[w,S]=i.useState([]),L=t=>{const r=c.filter(a=>t=="all"?c:a.type.toLowerCase().includes(t));d(r)},C=t=>{if(c.find(a=>a.name===t)){const a=c.filter(b=>b.name!==t);h(a),d(a),g("av_restaurants","deleteItem",t)}},D=t=>{y({title:s.business.edit_item,options:[{name:"type",type:"select",title:s.business.item_type,default:t.type,options:n,asterisk:!0,style:{marginTop:"5px"}},{name:"ingredients",type:"multiselect",title:s.business.ingredients,default:t.ingredients,max:3,searchable:!0,options:o,asterisk:!0,style:{marginTop:"5px"}},{name:"prop",type:"select",title:s.business.prop,default:t.prop,searchable:!0,options:w,asterisk:!0,style:{marginTop:"5px"}}],button:s.business.confirm,extraData:{event:"editItem",name:t.name}}),f(!0)},z=()=>{y({title:s.business.add_product,options:[{name:"name",type:"text",title:s.business.product_name,icon:"fa-solid fa-pen-to-square",asterisk:!0},{name:"image",type:"text",title:s.business.image_url,icon:"fa-regular fa-image",asterisk:!0},{name:"description",type:"text",title:s.business.description,icon:"fa-regular fa-comment",asterisk:!0},{name:"type",type:"select",title:s.business.item_type,default:"normal",options:n,asterisk:!0,style:{marginTop:"5px"}},{name:"ingredients",type:"multiselect",title:s.business.ingredients,default:"normal",max:3,searchable:!0,options:o,asterisk:!0,style:{marginTop:"5px"}},{name:"prop",type:"select",title:s.business.prop,searchable:!0,options:w,asterisk:!0,style:{marginTop:"5px"}}],button:s.business.confirm,extraData:{event:"addItem"}}),f(!0)},F=async t=>{var r;if((r=t==null?void 0:t.extraData)!=null&&r.event){const a=await g("av_restaurants",t.extraData.event,t);a!=="ok"&&(h(a),d(a))}f(!1)};return i.useEffect(()=>{(async()=>{const r=await g("av_restaurants","getMenu");d(r),h(r),n.map(b=>m(N=>[...N,b]));const a=K(x,u);S(a)})()},[]),e.jsxs("div",{className:"menu-container",children:[M&&e.jsx(Z,{callback:F,data:A}),e.jsx("div",{style:{position:"absolute",zIndex:"200",bottom:k(45),right:k(20)},children:e.jsx(R,{leftIcon:e.jsx("i",{className:"fa-regular fa-square-plus"}),onClick:z,children:s.business.new_button})}),e.jsxs("div",{className:"menu-header",children:[e.jsx(_,{order:3,children:`${j.length} ${s.business.items}`}),e.jsx(H,{defaultValue:"all",data:p,onChange:L})]}),e.jsx("div",{className:"menu-items",children:j.map((t,r)=>e.jsx(J,{item:t,handleDelete:C,handleEdit:D,lang:s.business},t.name+r))})]})};export{ne as default};
