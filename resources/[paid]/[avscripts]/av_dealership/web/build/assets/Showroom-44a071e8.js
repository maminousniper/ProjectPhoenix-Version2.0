import{N as L,d as z,e as V,R as g,B as P,M as T,Q as H,S as O,t as U,v as q,l as s,C as K,m as h,p as Q,G as S,w as W,X,x as Y,T as J,A as Z,j as E,q as ee,s as se,r as b,z as re,Y as I,o as C}from"./index-dafeadfa.js";import{I as oe,a as te,C as w}from"./IconSortDescendingLetters-e096bb00.js";import{M as le}from"./ModalMain-d572d4b6.js";import{G as R}from"./Grid-1e8beaee.js";import"./Paper-1e316dd2.js";import"./TextInput-22038d77.js";var ce={root:"m-de3d2490",colorOverlay:"m-862f3d1b",shadowOverlay:"m-98ae7f22",alphaOverlay:"m-95709ac0",childrenOverlay:"m-93e74e3"};const A=ce;var ne=Object.defineProperty,N=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,M=(e,r,o)=>r in e?ne(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,_=(e,r)=>{for(var o in r||(r={}))B.call(r,o)&&M(e,o,r[o]);if(N)for(var o of N(r))G.call(r,o)&&M(e,o,r[o]);return e},ie=(e,r)=>{var o={};for(var t in e)B.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&N)for(var t of N(e))r.indexOf(t)<0&&G.call(e,t)&&(o[t]=e[t]);return o};const F={withShadow:!0},ae=T((e,{radius:r,size:o})=>({root:{"--cs-radius":r===void 0?void 0:H(r),"--cs-size":O(o)}})),$=L((e,r)=>{const o=z("ColorSwatch",F,e),t=z("ColorSwatch",F,o),{classNames:a,className:p,style:d,styles:x,unstyled:f,vars:u,color:y,size:v,radius:c,withShadow:l,children:n,variant:j}=t,k=ie(t,["classNames","className","style","styles","unstyled","vars","color","size","radius","withShadow","children","variant"]),i=V({name:"ColorSwatch",props:o,classes:A,className:p,style:d,classNames:a,styles:x,unstyled:f,vars:u,varsResolver:ae});return g.createElement(P,_(_({ref:r,variant:j,size:v},i("root",{focusable:!0})),k),g.createElement("span",_({},i("alphaOverlay"))),l&&g.createElement("span",_({},i("shadowOverlay"))),g.createElement("span",_({},i("colorOverlay",{style:{backgroundColor:y}}))),g.createElement("span",_({},i("childrenOverlay")),n))});$.classes=A;$.displayName="@mantine/core/ColorSwatch";const he="_card_16jo9_1",me="_imageSection_16jo9_9",pe="_label_16jo9_25",de="_section_16jo9_43",xe="_timer_16jo9_53",fe="_icon_16jo9_63",m={card:he,imageSection:me,label:pe,section:de,timer:xe,icon:fe},ue=["red","blue","dark","gray","orange","pink","yellow","green"];function ye({data:e,handleColor:r,handleSlot:o,lang:t}){var d,x,f,u,y,v;const p=[{label:t.passengers,field:"seats",icon:U},{label:t.speed_unit,field:"speed",icon:q},{label:t.base_price,field:"basePrice",icon:oe},{label:t.class,field:"class",icon:te}].map(c=>{var l,n;return s.jsxs(K,{children:[s.jsx(c.icon,{size:"1.05rem",className:m.icon,stroke:1.5}),c.field=="basePrice"&&((l=e==null?void 0:e.extraData)!=null&&l.basePrice)?s.jsx(h,{c:"gray.2",size:"xs",children:`$${(n=e==null?void 0:e.extraData)==null?void 0:n.basePrice.toLocaleString("en-US")} ${c.label}`}):s.jsx(s.Fragment,{children:e.extraData?s.jsx(s.Fragment,{children:e!=null&&e.extraData[c.field]?s.jsx(h,{c:"gray.2",size:"xs",children:`${e==null?void 0:e.extraData[c.field]} ${c.label}`}):s.jsx(h,{c:"gray.2",size:"xs",children:`${c.label} N/A`})}):s.jsx(h,{c:"gray.2",size:"xs",children:`${c.label} N/A`})})]},c.label)});return s.jsx(s.Fragment,{children:s.jsxs(w,{withBorder:!0,radius:"md",className:m.card,bg:"dark.7",children:[s.jsx(w.Section,{className:m.imageSection,children:s.jsx(Q,{src:(d=e==null?void 0:e.extraData)!=null&&d.photo?(x=e==null?void 0:e.extraData)==null?void 0:x.photo:`https://docs.fivem.net/vehicles/${e.model}.webp`,alt:e.model,h:75,p:5,fallbackSrc:"https://i.imgur.com/KzeajsO.png"})}),s.jsxs(S,{justify:"space-between",mt:"md",children:[s.jsx("div",{style:{maxWidth:"65%"},children:(f=e==null?void 0:e.extraData)!=null&&f.label?s.jsx(h,{c:"gray.2",fw:500,truncate:!0,children:(u=e==null?void 0:e.extraData)==null?void 0:u.label}):s.jsx(h,{c:"gray.2",fw:500,truncate:!0,children:t.available_slot})}),((y=e==null?void 0:e.extraData)==null?void 0:y.category)&&s.jsx(W,{variant:"outline",color:"cyan.3",children:(v=e==null?void 0:e.extraData)==null?void 0:v.category})]}),s.jsxs(w.Section,{className:m.section,mt:"md",children:[s.jsx(h,{fz:"sm",c:"dimmed",className:m.label,children:t.vehicle_info}),s.jsx(S,{gap:8,children:p})]}),s.jsx(w.Section,{className:m.section,children:s.jsx(S,{gap:5,justify:"center",children:ue.map((c,l)=>s.jsx($,{component:"button",color:`var(--mantine-color-${c}-6)`,onClick:()=>r(e.identifier,c,e.color),style:{color:"#fff",cursor:"pointer"},size:O(22),disabled:!e.model,children:c==e.color&&s.jsx(X,{style:{width:O(12),height:O(12)}})},l))})}),s.jsx(w.Section,{className:m.section,children:s.jsx(S,{gap:5,children:s.jsx(Y,{radius:"xl",style:{flex:1},color:"cyan",onClick:()=>o(e),children:t.edit})})})]})})}const ve=({slots:e,lang:r})=>s.jsx(P,{bg:"dark.7",h:50,p:10,w:"100%",display:"inline-flex",style:{alignContent:"center",alignItems:"center",borderRadius:"4px"},children:s.jsx(J,{order:3,c:"gray.4",children:`${e} ${r.showroom_slots}`})});const je=(e,r)=>{const o=new Set;return e.filter(t=>{const a=t[r];return o.has(a)?!1:o.add(a)})},Ne=()=>{const e=Z(),{lang:r}=E(ee),{showroom:o,name:t}=E(se),[a,p]=b.useState(!1),[d,x]=b.useState({}),[f,u]=b.useState([]);re("updateShowroom",l=>{e(I(l))});const y=(l,n,j)=>{if(!j)return;if(o.find(i=>i.identifier===l)){const i=o.map(D=>D.identifier===l?{...D,color:n}:D);e(I(i)),n!==j&&C("av_dealership","updateColor",{name:t,identifier:l,color:n})}},v=l=>{x({title:r.showroom,options:[{name:"model",options:f,icon:"fa-solid fa-car",title:r.veh_model,type:"select",searchable:!0,default:l.model}],button:r.confirm_button,extraData:{event:"handleSlot",slot:l,name:t}}),p(!0)},c=l=>{var n;(n=l==null?void 0:l.extraData)!=null&&n.event&&C("av_dealership",l.extraData.event,l),p(!1)};return b.useEffect(()=>{(async()=>{const n=await C("av_dealership","getStock",t),j=je(n,"value");u(j)})()},[]),s.jsxs(s.Fragment,{children:[a&&s.jsx(le,{data:d,callback:c}),s.jsx(ve,{slots:o.length,lang:r}),s.jsx(P,{className:"showroom-container",style:{height:window.innerHeight/1.99},children:s.jsx(R,{columns:2,children:o.map((l,n)=>s.jsx(R.Col,{className:"showroom-card",children:s.jsx(ye,{data:l,handleColor:y,handleSlot:v,lang:r})},n))})})]})};export{Ne as default};
