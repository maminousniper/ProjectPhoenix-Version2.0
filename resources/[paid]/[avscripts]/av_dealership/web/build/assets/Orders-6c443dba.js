import{j as p,s as S,t as k,v,l as e,C as w,m as l,p as N,G as j,n as I,w as O,x as b,B as $,T as z,q as D,r as f,z as B,o as _}from"./index-dafeadfa.js";import{I as G,a as L,C as d}from"./IconSortDescendingLetters-e096bb00.js";import{G as y}from"./Grid-1e8beaee.js";import"./Paper-1e316dd2.js";const E="_card_16jo9_1",R="_imageSection_16jo9_9",T="_label_16jo9_25",F="_section_16jo9_43",P="_timer_16jo9_53",A="_icon_16jo9_63",a={card:E,imageSection:R,label:T,section:F,timer:P,icon:A};function H({data:c,units:i,identifier:t,handleStart:m,handleCancel:h,started:r,lang:s}){var u,g;const{inMission:n,myIdentifier:x}=p(S),C=[{label:s.passengers,field:"seats",icon:k},{label:s.speed_unit,field:"speed",icon:v},{label:s.base_price,field:"basePrice",icon:G},{label:s.class,field:"class",icon:L}].map(o=>e.jsxs(w,{children:[e.jsx(o.icon,{size:"1.05rem",className:a.icon,stroke:1.5}),o.field=="basePrice"?e.jsx(l,{c:"gray.2",size:"xs",children:`$${c.basePrice.toLocaleString("en-US")} ${o.label}`}):e.jsx(l,{c:"gray.2",size:"xs",children:`${c[o.field]} ${o.label}`})]},o.label));return e.jsxs(d,{withBorder:!0,radius:"md",className:a.card,bg:"dark.7",children:[e.jsx(d.Section,{children:e.jsx("div",{style:{width:"100%",display:"flex",position:"relative",marginLeft:"auto",backgroundColor:"#101113"},children:e.jsx(l,{c:"dark.2",fw:500,style:{display:"flex",marginLeft:"auto",marginRight:"auto"},children:`${s.units}: ${i}`})})}),e.jsx(d.Section,{className:a.imageSection,children:e.jsx(N,{src:(u=c==null?void 0:c.extraData)!=null&&u.photo?(g=c==null?void 0:c.extraData)==null?void 0:g.photo:`https://docs.fivem.net/vehicles/${c.model}.webp`,alt:c.name,h:75,p:5,fallbackSrc:"https://i.imgur.com/KzeajsO.png",fit:"scale-down"})}),e.jsxs(j,{justify:"space-between",mt:"md",children:[e.jsx("div",{style:{maxWidth:"65%"},children:e.jsx(I,{label:c.label,color:"dark.8",c:"gray.3",children:e.jsx(l,{c:"gray.2",fw:500,truncate:!0,children:c.label})})}),e.jsx(O,{variant:"outline",color:"cyan.3",children:c.category})]}),e.jsxs(d.Section,{className:a.section,mt:"md",children:[e.jsx(l,{fz:"sm",c:"dimmed",className:a.label,children:s.vehicle_info}),e.jsx(j,{gap:8,children:C})]}),e.jsx(d.Section,{className:a.section,children:e.jsx(j,{gap:5,children:x==r?e.jsx(b,{radius:"xl",style:{flex:1},color:"red.7",onClick:()=>{h(t)},children:s.cancel_contract}):e.jsx(b,{radius:"xl",style:{flex:1},color:"cyan",disabled:r||n,onClick:()=>{r?h(t):m(c,t,i)},children:r?`${s.in_progress}`:`${s.start_contract}`})})})]})}const U=({orders:c,lang:i})=>e.jsx($,{bg:"dark.7",h:50,p:10,w:"100%",display:"inline-flex",style:{alignContent:"center",alignItems:"center",borderRadius:"4px"},children:e.jsx(z,{order:3,c:"gray.4",children:`${c} ${i.orders}`})});const Q=()=>{const{lang:c}=p(D),{name:i}=p(S),[t,m]=f.useState({});B("updateOrders",s=>{m(s)}),f.useEffect(()=>{(async()=>{const n=await _("av_dealership","getContracts",i);m(n)})()},[]);const h=(s,n,x)=>{_("av_dealership","startContract",{contract:s,name:i,identifier:n,units:x})},r=s=>{_("av_dealership","cancelContract",{name:i,identifier:s})};return e.jsxs(e.Fragment,{children:[e.jsx(U,{orders:Object.keys(t).length,lang:c}),e.jsx($,{className:"order-container",style:{height:window.innerHeight/2},children:e.jsx(y,{columns:2,children:Object.keys(t).map((s,n)=>e.jsx(y.Col,{className:"order-card",children:e.jsx(H,{data:t[s].info,units:t[s].units,identifier:t[s].identifier,handleStart:h,handleCancel:r,started:t[s].started,lang:c},n)},n))})})]})};export{Q as default};
