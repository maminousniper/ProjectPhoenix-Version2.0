import{j as m,t as G,s as P,r as l,E as M,l as a,M as O,B as D,o as c}from"./index-0825e3d8.js";import{H as E,F as L}from"./WarehouseCard-bd6f0843.js";import{G as f}from"./Grid-570245c1.js";import"./Search-5662a6f0.js";import"./IconSearch-9811dc67.js";import"./SelectMenu-23a8868b.js";import"./Menu-6d6cb670.js";import"./IconChevronDown-ad88ecf9.js";import"./IconSortDescendingLetters-6548cdab.js";const I=()=>{const{lang:s}=m(G),{money:h,name:n,permissions:b}=m(P),[w,y]=l.useState({}),[g,u]=l.useState(!1),[i,p]=l.useState([]),[d,o]=l.useState([]),[x,v]=l.useState([]),j=!1;M("removePreowned",t=>{const e=i.filter(r=>r.plate!==t);p(e),o(e)});const V=t=>{const e=Object.values(i).filter(r=>t?r.category.toLowerCase().includes(t.toLowerCase()):!0);o(e)},_=t=>{const e=Object.values(i).filter(r=>t===""?!0:r.label.toLowerCase().includes(t.toLowerCase()));o(e)},S=(t,e)=>{switch(t){case"test":c("av_dealership","testDrive",{model:e.model,dealership:n,mods:e.mods});break;case"sell":y({title:s.sell_vehicle,options:[{name:"vehicle",type:"text",title:s.veh_model,default:e.label,icon:"fa-regular fa-pen-to-square",disabled:!0},{name:"basePrice",type:"number",title:s.base_price,default:e.basePrice,icon:"fa-solid fa-tags",disabled:!0},{name:"playerId",type:"number",title:s.player_id,default:0,icon:"fa-solid fa-user"},{name:"phone",type:"number",title:s.customer_phone,default:0,icon:"fa-solid fa-phone"},{name:"price",type:"number",title:s.price,default:0,icon:"fa-solid fa-file-invoice-dollar"},{name:"payments",type:"number",title:s.payments,default:1,icon:"fa-solid fa-calendar-days",subtitle:s.max_payments},{name:"garage",type:"select",title:s.garage,icon:"fa-solid fa-warehouse",options:x,searchable:!0},{type:"info",description:s.sell_confirmation,style:{marginTop:"10px",fontSize:"14px",fontWeight:"500",textAlign:"center"}}],button:s.confirm_button,extraData:{event:"sellVehicle",dealer:n,model:e.model,label:e.label,funds:h,preowned:!0,plate:e.plate,basePrice:e.basePrice}}),u(!0);break}},C=t=>{var e;u(!1),(e=t==null?void 0:t.extraData)!=null&&e.event&&c("av_dealership",t.extraData.event,t)};return l.useEffect(()=>{(async()=>{const e=await c("av_dealership","getOwnedVehicles",n);v(e.allGarages),p(e.allVehicles),o(e.allVehicles)})()},[]),a.jsxs("div",{children:[g&&a.jsx(O,{data:w,callback:C}),a.jsx(E,{vehicles:d,handleCategory:V,handleSearch:_,showContract:b.canBuy}),a.jsx(D,{className:"warehouse-container",style:{height:window.innerHeight/2.05},children:a.jsx(f,{columns:2,children:d.map((t,e)=>a.jsx(f.Col,{className:"warehouse-card",children:a.jsx(L,{data:t,onSelect:S,driveTestOpen:j,lang:s,isPreowned:!0},e)},e))})})]})};export{I as default};
