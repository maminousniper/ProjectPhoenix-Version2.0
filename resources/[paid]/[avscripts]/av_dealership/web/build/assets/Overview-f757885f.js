import{j as C,y as z,l as e,B as D,G as N,T as F,x as V,r as b,V as R,a7 as k,p as H,F as U,m as A,S as q,A as K,q as W,z as v,a8 as S,o as J}from"./index-dafeadfa.js";import{S as Q}from"./Search-a972d158.js";import{S as X}from"./SelectMenu-6299afef.js";import{T as a}from"./Table-e4d8b01e.js";import{A as O,M as Y}from"./ModalMain-d572d4b6.js";import{I as Z,a as ee}from"./IconTrash-e5a9196e.js";import"./IconSearch-96976665.js";import"./TextInput-22038d77.js";import"./Paper-1e316dd2.js";const te=({vehicles:d,handleSearch:s,handleCategory:i,showButton:x,handleGroupEdit:f,handleDelete:n,lang:r})=>{const{allCategories:g}=C(z);return e.jsxs(D,{bg:"dark.7",h:50,p:10,w:"100%",display:"inline-flex",style:{alignContent:"center",alignItems:"center",borderRadius:"4px"},children:[e.jsxs(N,{gap:"xs",children:[e.jsx(F,{order:3,c:"gray.4",children:`${Object.keys(d).length} ${r.vehicles}`}),e.jsx(X,{data:g,callback:i,placeholder:r.categories,searchable:!0})]}),e.jsxs(D,{style:{display:"flex",justifyContent:"flex-end",float:"right",marginLeft:"auto"},children:[x&&e.jsx(V,{size:"xs",mr:10,color:"cyan",onClick:f,children:r.edit}),x&&e.jsx(V,{size:"xs",mr:10,color:"red",onClick:n,children:r.delete}),e.jsx(Q,{callback:s})]})]})},se="_rowSelected_1nyh5_1",le={rowSelected:se},ae=({vehicles:d,showSelected:s,handleDelete:i,handleEdit:x,lang:f})=>{const[n,r]=b.useState([]),g=h=>{r(c=>c.includes(h)?c.filter(j=>j!==h):[...c,h])},T=()=>{const h=Object.keys(d);r(c=>c.length===h.length?[]:h.map(j=>j))};b.useEffect(()=>{n.length>0?s(!0,n):s(!1,n)},[n]);const w=Object.keys(d).slice(0,150).map(h=>{var j;const l=d[h],c=n.includes(l.model);return e.jsxs(a.Tr,{className:R({[le.rowSelected]:c}),children:[e.jsx(a.Td,{children:e.jsx(k,{checked:n.includes(l.model),onChange:()=>g(l.model)})}),e.jsx(a.Td,{w:65,children:e.jsx(H,{w:50,h:30,src:l.photo?l.photo:`https://docs.fivem.net/vehicles/${l.model}.webp`,fallbackSrc:"https://i.imgur.com/KzeajsO.png",fit:"scale-down"})}),e.jsx(a.Td,{w:80,children:e.jsxs(U,{gap:"0px",justify:"flex-start",align:"flex-start",direction:"column",wrap:"wrap",children:[e.jsx(A,{size:"sm",truncate:!0,style:{textOverflow:"ellipsis"},children:l.label}),e.jsx(A,{size:"xs",c:"dimmed",children:l.model})]})}),e.jsx(a.Td,{tt:"capitalize",children:l.category}),e.jsx(a.Td,{children:l.basePrice?`$${l.basePrice.toLocaleString("en-US")}`:"Undefined"}),e.jsx(a.Td,{style:{overflow:"hidden",textOverflow:"ellipsis"},children:(j=l==null?void 0:l.dealerships)==null?void 0:j.length}),e.jsx(a.Td,{children:l.auction?f.yes:f.no}),e.jsx(a.Td,{children:l.warehouse?f.yes:f.no}),e.jsxs(a.Td,{children:[e.jsx(O,{variant:"subtle",color:"cyan",size:"sm",mr:10,onClick:()=>{x(l)},children:e.jsx(Z,{size:16})}),e.jsx(O,{variant:"subtle",color:"red",size:"sm",onClick:()=>{i(l)},children:e.jsx(ee,{size:16})})]})]},l.model)});return e.jsx(e.Fragment,{children:e.jsxs(a,{w:"100%",verticalSpacing:"xs",bg:"dark.5",children:[e.jsx(a.Thead,{children:e.jsxs(a.Tr,{children:[e.jsx(a.Th,{style:{width:q(40)},children:e.jsx(k,{onChange:T,checked:n.length===d.length,indeterminate:n.length>0&&n.length!==d.length})}),e.jsx(a.Th,{}),e.jsx(a.Th,{children:"Vehicle"}),e.jsx(a.Th,{children:"Category"}),e.jsx(a.Th,{children:"Base Price"}),e.jsx(a.Th,{children:"Dealerships"}),e.jsx(a.Th,{children:"Auction"}),e.jsx(a.Th,{children:"Warehouse"}),e.jsx(a.Th,{children:"Actions"})]})}),e.jsx(a.Tbody,{children:w})]})})};const xe=()=>{const d=K(),{lang:s}=C(W),{allVehicles:i,allDealerships:x,allCategories:f}=C(z),[n,r]=b.useState(i),[g,T]=b.useState(!1),[w,h]=b.useState([]),[l,c]=b.useState(!1),[j,y]=b.useState({});v("updateVehicle",t=>{const o={...i,[t.model]:t},p={...n,[t.model]:t};d(S(o)),r(p)}),v("updateVehicleGroup",t=>{const o={...i},p={...n};t.forEach(m=>{o[m.model]=m,p[m.model]=m}),d(S(o)),r(p)}),v("updateAllVehicles",t=>{d(S(t)),r(t)});const L=t=>{const o=Object.keys(i);if(t==="all"||!t)r(i);else{const p=o.reduce((m,u)=>(i[u].category.toLowerCase()===t&&(m[u]=i[u]),m),{});r(p)}},$=t=>{const o=Object.keys(i);if(t==="")r(i);else{const m=o.filter(u=>i[u].label.toLowerCase().includes(t)||i[u].model&&i[u].model.toLowerCase().includes(t)).reduce((u,_)=>(u[_]=i[_],u),{});r(m)}},G=(t,o)=>{T(t),h(o)},E=()=>{const t=Object.keys(x).map(o=>({value:o,label:x[o].label}));y({title:s.edit_vehicles,options:[{name:"basePrice",icon:"fa-solid fa-tag",title:s.base_price,type:"number"},{name:"dealerships",title:s.all_dealerships,type:"multiselect",options:t},{name:"auction",title:s.available_auction,type:"switch",default:!1,style:{marginTop:"10px"}},{name:"warehouse",title:s.available_warehouse,type:"switch",default:!1,style:{marginTop:"10px"}}],button:s.confirm_button,extraData:{event:"editVehicles",selectedVehicles:w}}),c(!0)},M=t=>{var o;(o=t==null?void 0:t.extraData)!=null&&o.event&&J("av_dealership",t.extraData.event,t),c(!1)},P=()=>{y({title:"Delete Vehicles",options:[{style:{textAlign:"center"},description:`${s.delete_confirmation} ${w.length} ${s.vehicles.toLowerCase()}.`,type:"info"}],button:s.confirm_button,extraData:{event:"deleteVehicles",selectedVehicles:w}}),c(!0)},B=t=>{const o=Object.keys(x).map(p=>({value:p,label:x[p].label}));y({title:t.label,options:[{name:"photo",icon:"fa-regular fa-image",title:s.photo,type:"text",default:t.photo},{name:"basePrice",icon:"fa-solid fa-tag",title:s.base_price,type:"number",default:t.basePrice},{name:"category",title:s.category,type:"select",options:f,default:t.category},{name:"dealerships",title:s.all_dealerships,type:"multiselect",options:o,default:t.dealerships},{name:"auction",title:s.available_auction,type:"switch",default:t.auction,style:{marginTop:"10px"}},{name:"warehouse",title:s.available_warehouse,type:"switch",default:t.warehouse,style:{marginTop:"10px"}}],button:s.confirm_button,extraData:{event:"editVehicle",element:t}}),c(!0)},I=t=>{y({title:s.delete_vehicles,options:[{style:{textAlign:"center"},description:`${s.delete_vehicles_confirmation} ${s.vehicles.toLowerCase()}?`,type:"info"}],button:s.confirm_button,extraData:{event:"deleteVehicle",name:t.model}}),c(!0)};return e.jsxs("div",{style:{overflow:"hidden"},children:[l&&e.jsx(Y,{data:j,callback:M}),e.jsx(te,{vehicles:n,handleCategory:L,handleSearch:$,showButton:g,handleGroupEdit:E,handleDelete:P,lang:s}),e.jsx("div",{className:"overview-container",style:{height:window.innerHeight/2.05},children:e.jsx(ae,{vehicles:n,showSelected:G,handleEdit:B,handleDelete:I,lang:s})})]})};export{xe as default};
