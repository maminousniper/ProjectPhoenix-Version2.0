import{j as _,z,l as e,B as D,G as N,T as F,y as V,r as b,_ as H,ac as k,q as R,F as U,m as O,A,W,H as q,t as K,E as v,M as J,ad as S,o as Q}from"./index-0825e3d8.js";import{S as X}from"./Search-5662a6f0.js";import{S as Y}from"./SelectMenu-23a8868b.js";import{T as a}from"./Table-50716821.js";import{I as Z,a as ee}from"./IconTrash-15688357.js";import"./IconSearch-9811dc67.js";const te=({vehicles:d,handleSearch:s,handleCategory:o,showButton:x,handleGroupEdit:f,handleDelete:i,lang:c})=>{const{allCategories:g}=_(z);return e.jsxs(D,{bg:"dark.7",h:50,p:10,w:"100%",display:"inline-flex",style:{alignContent:"center",alignItems:"center",borderRadius:"4px"},children:[e.jsxs(N,{gap:"xs",children:[e.jsx(F,{order:3,c:"gray.4",children:`${Object.keys(d).length} ${c.vehicles}`}),e.jsx(Y,{data:g,callback:o,placeholder:c.categories,searchable:!0})]}),e.jsxs(D,{style:{display:"flex",justifyContent:"flex-end",float:"right",marginLeft:"auto"},children:[x&&e.jsx(V,{size:"xs",mr:10,color:"cyan",onClick:f,children:c.edit}),x&&e.jsx(V,{size:"xs",mr:10,color:"red",onClick:i,children:c.delete}),e.jsx(X,{callback:s})]})]})},se="_rowSelected_1nyh5_1",le={rowSelected:se},ae=({vehicles:d,showSelected:s,handleDelete:o,handleEdit:x,lang:f})=>{const[i,c]=b.useState([]),g=h=>{c(r=>r.includes(h)?r.filter(j=>j!==h):[...r,h])},T=()=>{const h=Object.keys(d);c(r=>r.length===h.length?[]:h.map(j=>j))};b.useEffect(()=>{i.length>0?s(!0,i):s(!1,i)},[i]);const w=Object.keys(d).slice(0,150).map(h=>{var j;const l=d[h],r=i.includes(l.model);return e.jsxs(a.Tr,{className:H({[le.rowSelected]:r}),children:[e.jsx(a.Td,{children:e.jsx(k,{checked:i.includes(l.model),onChange:()=>g(l.model)})}),e.jsx(a.Td,{w:65,children:e.jsx(R,{w:50,h:30,src:l.photo?l.photo:`https://docs.fivem.net/vehicles/${l.model}.webp`,fallbackSrc:"https://i.imgur.com/KzeajsO.png",fit:"scale-down"})}),e.jsx(a.Td,{w:80,children:e.jsxs(U,{gap:"0px",justify:"flex-start",align:"flex-start",direction:"column",wrap:"wrap",children:[e.jsx(O,{size:"sm",truncate:!0,style:{textOverflow:"ellipsis"},children:l.label}),e.jsx(O,{size:"xs",c:"dimmed",children:l.model})]})}),e.jsx(a.Td,{tt:"capitalize",children:l.category}),e.jsx(a.Td,{children:l.basePrice?`$${l.basePrice.toLocaleString("en-US")}`:"Undefined"}),e.jsx(a.Td,{style:{overflow:"hidden",textOverflow:"ellipsis"},children:(j=l==null?void 0:l.dealerships)==null?void 0:j.length}),e.jsx(a.Td,{children:l.auction?f.yes:f.no}),e.jsx(a.Td,{children:l.warehouse?f.yes:f.no}),e.jsxs(a.Td,{children:[e.jsx(A,{variant:"subtle",color:"cyan",size:"sm",mr:10,onClick:()=>{x(l)},children:e.jsx(Z,{size:16})}),e.jsx(A,{variant:"subtle",color:"red",size:"sm",onClick:()=>{o(l)},children:e.jsx(ee,{size:16})})]})]},l.model)});return e.jsx(e.Fragment,{children:e.jsxs(a,{w:"100%",verticalSpacing:"xs",bg:"dark.5",children:[e.jsx(a.Thead,{children:e.jsxs(a.Tr,{children:[e.jsx(a.Th,{style:{width:W(40)},children:e.jsx(k,{onChange:T,checked:i.length===d.length,indeterminate:i.length>0&&i.length!==d.length})}),e.jsx(a.Th,{}),e.jsx(a.Th,{children:"Vehicle"}),e.jsx(a.Th,{children:"Category"}),e.jsx(a.Th,{children:"Base Price"}),e.jsx(a.Th,{children:"Dealerships"}),e.jsx(a.Th,{children:"Auction"}),e.jsx(a.Th,{children:"Warehouse"}),e.jsx(a.Th,{children:"Actions"})]})}),e.jsx(a.Tbody,{children:w})]})})};const he=()=>{const d=q(),{lang:s}=_(K),{allVehicles:o,allDealerships:x,allCategories:f}=_(z),[i,c]=b.useState(o),[g,T]=b.useState(!1),[w,h]=b.useState([]),[l,r]=b.useState(!1),[j,y]=b.useState({});v("updateVehicle",t=>{const n={...o,[t.model]:t},u={...i,[t.model]:t};d(S(n)),c(u)}),v("updateVehicleGroup",t=>{const n={...o},u={...i};t.forEach(m=>{n[m.model]=m,u[m.model]=m}),d(S(n)),c(u)}),v("updateAllVehicles",t=>{d(S(t)),c(t)});const L=t=>{const n=Object.keys(o);if(t==="all"||!t)c(o);else{const u=n.reduce((m,p)=>(o[p].category.toLowerCase()===t&&(m[p]=o[p]),m),{});c(u)}},$=t=>{const n=Object.keys(o);if(t==="")c(o);else{const m=n.filter(p=>o[p].label.toLowerCase().includes(t)||o[p].model&&o[p].model.toLowerCase().includes(t)).reduce((p,C)=>(p[C]=o[C],p),{});c(m)}},G=(t,n)=>{T(t),h(n)},E=()=>{const t=Object.keys(x).map(n=>({value:n,label:x[n].label}));y({title:s.edit_vehicles,options:[{name:"basePrice",icon:"fa-solid fa-tag",title:s.base_price,type:"number"},{name:"dealerships",title:s.all_dealerships,type:"multiselect",options:t},{name:"auction",title:s.available_auction,type:"switch",default:!1,style:{marginTop:"10px"}},{name:"warehouse",title:s.available_warehouse,type:"switch",default:!1,style:{marginTop:"10px"}}],button:s.confirm_button,extraData:{event:"editVehicles",selectedVehicles:w}}),r(!0)},M=t=>{var n;(n=t==null?void 0:t.extraData)!=null&&n.event&&Q("av_dealership",t.extraData.event,t),r(!1)},P=()=>{y({title:"Delete Vehicles",options:[{style:{textAlign:"center"},description:`${s.delete_confirmation} ${w.length} ${s.vehicles.toLowerCase()}.`,type:"info"}],button:s.confirm_button,extraData:{event:"deleteVehicles",selectedVehicles:w}}),r(!0)},B=t=>{const n=Object.keys(x).map(u=>({value:u,label:x[u].label}));y({title:t.label,options:[{name:"photo",icon:"fa-regular fa-image",title:s.photo,type:"text",default:t.photo},{name:"basePrice",icon:"fa-solid fa-tag",title:s.base_price,type:"number",default:t.basePrice},{name:"category",title:s.category,type:"select",options:f,default:t.category},{name:"dealerships",title:s.all_dealerships,type:"multiselect",options:n,default:t.dealerships},{name:"auction",title:s.available_auction,type:"switch",default:t.auction,style:{marginTop:"10px"}},{name:"warehouse",title:s.available_warehouse,type:"switch",default:t.warehouse,style:{marginTop:"10px"}}],button:s.confirm_button,extraData:{event:"editVehicle",element:t}}),r(!0)},I=t=>{y({title:s.delete_vehicles,options:[{style:{textAlign:"center"},description:`${s.delete_vehicles_confirmation} ${s.vehicles.toLowerCase()}?`,type:"info"}],button:s.confirm_button,extraData:{event:"deleteVehicle",name:t.model}}),r(!0)};return e.jsxs("div",{style:{overflow:"hidden"},children:[l&&e.jsx(J,{data:j,callback:M}),e.jsx(te,{vehicles:i,handleCategory:L,handleSearch:$,showButton:g,handleGroupEdit:E,handleDelete:P,lang:s}),e.jsx("div",{className:"overview-container",style:{height:window.innerHeight/2.05},children:e.jsx(ae,{vehicles:i,showSelected:G,handleEdit:B,handleDelete:I,lang:s})})]})};export{he as default};
