import{r as g,c as ae,d as F,e as J,R as x,B as E,M as W,g as se,N as oe,O as ne,Q as le,i as ie,l as a,G,m as p,S as j,j as B,q as ce,s as de,z as pe,T as ue,x as me,o as V}from"./index-dafeadfa.js";import{T as u}from"./Table-e4d8b01e.js";import{M as O}from"./Menu-4bcfc8b1.js";import{A as fe,M as ve}from"./ModalMain-d572d4b6.js";import{I as he,a as ye}from"./IconTrash-e5a9196e.js";import{S as ge}from"./Search-a972d158.js";import"./TextInput-22038d77.js";import"./Paper-1e316dd2.js";import"./IconSearch-96976665.js";const K=g.createContext(null),_e=K.Provider;function xe(){return{withinGroup:!!g.useContext(K)}}var be={root:"m-f85678b6",image:"m-11f8ac07",placeholder:"m-104cd71f",group:"m-11def92b"};const z=be;var je=Object.defineProperty,$=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,Z=(e,t,r)=>t in e?je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,H=(e,t)=>{for(var r in t||(t={}))X.call(t,r)&&Z(e,r,t[r]);if($)for(var r of $(t))Y.call(t,r)&&Z(e,r,t[r]);return e},we=(e,t)=>{var r={};for(var s in e)X.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&$)for(var s of $(e))t.indexOf(s)<0&&Y.call(e,s)&&(r[s]=e[s]);return r};const Pe={},Oe=W((e,{spacing:t})=>({group:{"--ag-spacing":se(t)}})),k=ae((e,t)=>{const r=F("AvatarGroup",Pe,e),s=r,{classNames:l,className:n,style:d,styles:m,unstyled:f,vars:_,spacing:i}=s,v=we(s,["classNames","className","style","styles","unstyled","vars","spacing"]),h=J({name:"AvatarGroup",classes:z,props:r,className:n,style:d,classNames:l,styles:m,unstyled:f,vars:_,varsResolver:Oe,rootSelector:"group"});return x.createElement(_e,{value:!0},x.createElement(E,H(H({ref:t},h("group")),v)))});k.classes=z;k.displayName="@mantine/core/AvatarGroup";var Ce=Object.defineProperty,Ee=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,U=(e,t,r)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ae=(e,t)=>{for(var r in t||(t={}))Te.call(t,r)&&U(e,r,t[r]);if(Q)for(var r of Q(t))$e.call(t,r)&&U(e,r,t[r]);return e},ze=(e,t)=>Ee(e,Se(t));function Ie(e){return x.createElement("svg",ze(Ae({},e),{"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),x.createElement("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var Me=Object.defineProperty,Ne=Object.defineProperties,De=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C=(e,t)=>{for(var r in t||(t={}))ee.call(t,r)&&q(e,r,t[r]);if(A)for(var r of A(t))te.call(t,r)&&q(e,r,t[r]);return e},R=(e,t)=>Ne(e,De(t)),Re=(e,t)=>{var r={};for(var s in e)ee.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&A)for(var s of A(e))t.indexOf(s)<0&&te.call(e,s)&&(r[s]=e[s]);return r};const Ge={},ke=W((e,{size:t,radius:r,variant:s,gradient:l,color:n})=>{const d=e.variantColorResolver({color:n||"gray",theme:e,gradient:l,variant:s||"light"});return{root:{"--avatar-size":ne(t,"avatar-size"),"--avatar-radius":r===void 0?void 0:le(r),"--avatar-bg":n||s?d.background:void 0,"--avatar-color":n||s?d.color:void 0,"--avatar-bd":n||s?d.border:void 0}}}),I=oe((e,t)=>{const r=F("Avatar",Ge,e),s=r,{classNames:l,className:n,style:d,styles:m,unstyled:f,vars:_,src:i,alt:v,radius:h,color:w,gradient:P,imageProps:y,children:M}=s,N=Re(s,["classNames","className","style","styles","unstyled","vars","src","alt","radius","color","gradient","imageProps","children"]),D=xe(),[S,o]=g.useState(!i),c=J({name:"Avatar",props:r,classes:z,className:n,style:d,classNames:l,styles:m,unstyled:f,vars:_,varsResolver:ke});return g.useEffect(()=>o(!i),[i]),x.createElement(E,C(R(C({},c("root")),{mod:{"within-group":D.withinGroup},ref:t}),N),S?x.createElement("span",R(C({},c("placeholder")),{title:v}),M||x.createElement(Ie,null)):x.createElement("img",R(C(C({},y),c("image")),{src:i,alt:v,onError:b=>{var T;o(!0),(T=y==null?void 0:y.onError)==null||T.call(y,b)}})))});I.classes=z;I.displayName="@mantine/core/Avatar";I.Group=k;var Le=ie("dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);const Be=({employees:e,editEmployee:t,fireEmployee:r,isOwner:s,lang:l})=>Object.keys(e).map((n,d)=>{var m,f,_,i,v,h,w,P,y;return a.jsxs(u.Tr,{children:[a.jsx(u.Td,{children:a.jsxs(G,{gap:"sm",children:[a.jsx(I,{size:40,src:(m=e[n])==null?void 0:m.photo,radius:40}),a.jsxs("div",{children:[a.jsx(p,{fz:"sm",fw:500,c:"gray.3",children:(f=e[n])==null?void 0:f.name}),a.jsx(p,{c:"dimmed",fz:"xs",tt:"capitalize",children:(_=e[n])==null?void 0:_.gradeLabel})]})]})}),a.jsxs(u.Td,{children:[a.jsx(p,{fz:"sm",fw:500,c:"gray.3",children:(i=e[n])==null?void 0:i.orders}),a.jsx(p,{fz:"xs",c:"dimmed",children:l.orders_completed})]}),a.jsxs(u.Td,{children:[a.jsx(p,{fz:"sm",fw:500,c:"gray.3",children:(v=e[n])==null?void 0:v.sold}),a.jsx(p,{fz:"xs",c:"dimmed",children:l.vehicles_sold})]}),a.jsxs(u.Td,{children:[a.jsxs(p,{fz:"sm",fw:500,c:"gray.3",children:["$",(w=(h=e[n])==null?void 0:h.monthly)==null?void 0:w.toLocaleString("en-US")]}),a.jsx(p,{fz:"xs",c:"dimmed",children:l.month_revenue})]}),a.jsxs(u.Td,{children:[a.jsxs(p,{fz:"sm",fw:500,c:"gray.3",children:["$",(y=(P=e[n])==null?void 0:P.total)==null?void 0:y.toLocaleString("en-US")]}),a.jsx(p,{fz:"xs",c:"dimmed",children:l.total_revenue})]}),s&&a.jsx(u.Td,{children:a.jsx(G,{gap:0,justify:"flex-end",children:a.jsxs(O,{transitionProps:{transition:"pop"},withArrow:!0,position:"bottom-end",withinPortal:!0,children:[a.jsx(O.Target,{children:a.jsx(fe,{variant:"subtle",color:"gray",children:a.jsx(Le,{style:{width:j(16),height:j(16)},stroke:1.5})})}),a.jsxs(O.Dropdown,{children:[a.jsx(O.Item,{leftSection:a.jsx(he,{style:{width:j(16),height:j(16)},stroke:1.5}),onClick:()=>{t(e[n])},children:l.edit_employee}),a.jsx(O.Item,{leftSection:a.jsx(ye,{style:{width:j(16),height:j(16)},stroke:1.5}),color:"red",onClick:()=>{r(e[n])},children:l.terminate_contract})]})]})})})]},d)}),Ke=()=>{var S;const{lang:e}=B(ce),{availableGrades:t,job:r,name:s,isOwner:l}=B(de),[n,d]=g.useState([]),[m,f]=g.useState(n),[_,i]=g.useState(!1),[v,h]=g.useState({}),w=["owner"];pe("updateEmployees",o=>{d(o),f(o)});const P=o=>{const c=n.filter(b=>o==""?n:b.name.toLowerCase().includes(o));f(c)};g.useEffect(()=>{(()=>{V("av_dealership","getEmployees",{job:r,name:s})})()},[]);const y=o=>{const c=o.identifier,b={...o.permissions},T=Object.keys(b).filter(L=>b[L]===!0&&!w.includes(L)),re=[{value:"auctionsTab",label:e.auctions_tab},{value:"ordersTab",label:e.orders_tab},{value:"employeesTab",label:e.employees_tab},{value:"paymentsTab",label:e.payments_tab},{value:"showroomTab",label:e.showroom_tab},{value:"warehouseTab",label:e.warehouse_tab},{value:"testDrive",label:e.test_drive},{value:"sellVehicle",label:e.sell_vehicle},{value:"preownedTab",label:e.preowned_tab},{value:"canBuy",label:e.canBuy},{value:"settingsTab",label:e.settings_tab}];h({title:e.edit_employee,options:[{type:"image",image:o.photo,height:100,title:o.name,style:{marginTop:"10px"},default:"https://i.imgur.com/QJlLeuN.png"},{name:"photo",icon:"fa-regular fa-image",title:e.photo,type:"text",default:o.photo},{name:"grade",title:e.grade,type:"select",default:o.grade,options:t},{name:"permissions",title:e.permissions,type:"multiselect",default:T,options:re}],button:e.confirm_button,extraData:{event:"editEmployee",identifier:c,name:s}}),i(!0)},M=o=>{const c=o.identifier;h({title:`${e.fire_employee} ${o.name}`,options:[{type:"info",description:e.fire_confirmation,style:{textAlign:"center"}}],button:e.confirm_button,extraData:{event:"fireEmployee",identifier:c,name:s}}),i(!0)},N=()=>{h({title:e.hire_employee,options:[{name:"playerId",icon:"fa-solid fa-user-plus",title:e.playerid,type:"number"}],button:e.confirm_button,extraData:{event:"hireEmployee",name:s}}),i(!0)},D=o=>{var c;(c=o==null?void 0:o.extraData)!=null&&c.event&&V("av_dealership",o.extraData.event,o),i(!1)};return a.jsxs(E,{children:[_&&a.jsx(ve,{data:v,callback:D}),a.jsxs(E,{bg:"dark.7",h:50,p:10,w:"100%",display:"inline-flex",style:{alignContent:"center",alignItems:"center",borderRadius:"4px"},children:[a.jsx(G,{gap:"lg",children:a.jsx(ue,{order:3,c:"gray.4",children:`${(S=Object.keys(m))==null?void 0:S.length} ${e.employees}`})}),a.jsxs(E,{style:{display:"flex",justifyContent:"flex-end",float:"right",marginLeft:"auto"},children:[l&&a.jsx(me,{size:"xs",color:"cyan",mr:10,onClick:N,children:"Hire Employee"}),a.jsx(ge,{callback:P})]})]}),a.jsx(u.ScrollContainer,{minWidth:500,h:window.innerHeight/2,children:a.jsx(u,{verticalSpacing:"md",children:a.jsx(u.Tbody,{children:a.jsx(Be,{employees:m,editEmployee:y,fireEmployee:M,isOwner:l,lang:e})})})})]})};export{Ke as default};
