import{j as d,q as G,s as P,r as l,z as M,l as a,B as O,o as c}from"./index-dafeadfa.js";import{H as D,F as L}from"./WarehouseCard-5972a0cf.js";import{M as A}from"./ModalMain-d572d4b6.js";import{G as f}from"./Grid-1e8beaee.js";import"./Search-a972d158.js";import"./IconSearch-96976665.js";import"./SelectMenu-6299afef.js";import"./Menu-4bcfc8b1.js";import"./IconChevronDown-2f2dc9b5.js";import"./IconSortDescendingLetters-e096bb00.js";import"./Paper-1e316dd2.js";import"./TextInput-22038d77.js";const J=()=>{const{lang:s}=d(G),{money:h,name:i,permissions:b}=d(P),[w,y]=l.useState({}),[g,p]=l.useState(!1),[n,u]=l.useState([]),[m,o]=l.useState([]),[x,v]=l.useState([]),j=!1;M("removePreowned",t=>{const e=n.filter(r=>r.plate!==t);u(e),o(e)});const V=t=>{const e=Object.values(n).filter(r=>t?r.category.toLowerCase().includes(t.toLowerCase()):!0);o(e)},_=t=>{const e=Object.values(n).filter(r=>t===""?!0:r.label.toLowerCase().includes(t.toLowerCase()));o(e)},S=(t,e)=>{switch(t){case"test":c("av_dealership","testDrive",{model:e.model,dealership:i,mods:e.mods});break;case"sell":y({title:s.sell_vehicle,options:[{name:"vehicle",type:"text",title:s.veh_model,default:e.label,icon:"fa-regular fa-pen-to-square",disabled:!0},{name:"basePrice",type:"number",title:s.base_price,default:e.basePrice,icon:"fa-solid fa-tags",disabled:!0},{name:"playerId",type:"number",title:s.player_id,default:0,icon:"fa-solid fa-user"},{name:"phone",type:"number",title:s.customer_phone,default:0,icon:"fa-solid fa-phone"},{name:"price",type:"number",title:s.price,default:0,icon:"fa-solid fa-file-invoice-dollar"},{name:"payments",type:"number",title:s.payments,default:1,icon:"fa-solid fa-calendar-days",subtitle:s.max_payments},{name:"garage",type:"select",title:s.garage,icon:"fa-solid fa-warehouse",options:x,searchable:!0},{type:"info",description:s.sell_confirmation,style:{marginTop:"10px",fontSize:"14px",fontWeight:"500",textAlign:"center"}}],button:s.confirm_button,extraData:{event:"sellVehicle",dealer:i,model:e.model,label:e.label,funds:h,preowned:!0,plate:e.plate,basePrice:e.basePrice}}),p(!0);break}},C=t=>{var e;p(!1),(e=t==null?void 0:t.extraData)!=null&&e.event&&c("av_dealership",t.extraData.event,t)};return l.useEffect(()=>{(async()=>{const e=await c("av_dealership","getOwnedVehicles",i);v(e.allGarages),u(e.allVehicles),o(e.allVehicles)})()},[]),a.jsxs("div",{children:[g&&a.jsx(A,{data:w,callback:C}),a.jsx(D,{vehicles:m,handleCategory:V,handleSearch:_,showContract:b.canBuy}),a.jsx(O,{className:"warehouse-container",style:{height:window.innerHeight/2.05},children:a.jsx(f,{columns:2,children:m.map((t,e)=>a.jsx(f.Col,{className:"warehouse-card",children:a.jsx(L,{data:t,onSelect:S,driveTestOpen:j,lang:s,isPreowned:!0},e)},e))})})]})};export{J as default};
